<div class="page-header">
  <div class="d-flex justify-content-center my-5">
    <div class="col-md-5 text-center">
      <h1>Olá {{ usuario?.Nome }}, bem vindo</h1>
      <h6 *ngIf="usuario?.CPF">
        Aqui estão algumas vagas disponíveis para você
      </h6>
      <h6 *ngIf="usuario?.CNPJ">Aqui estão as vagas cadastradas</h6>
    </div>
  </div>
</div>
<div class="container">
  <p-table
    [value]="vagas"
    [paginator]="true"
    [rows]="10"
    [showCurrentPageReport]="true"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [rowsPerPageOptions]="[10, 25, 50]"
    [scrollable]="true"
    scrollHeight="400px"
    [tableStyle]="{ 'min-width': '400px' }"
  >
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 20%">Evento</th>
        <th style="width: 20%">Localização</th>
        <th style="width: 20%">Data Expiração</th>
        <th style="width: 20%">Valor</th>
        <th style="width: 20%"></th>
      </tr>
      <tr>
        <th class="w-250">
          <p-columnFilter field="Nome" matchMode="equals" [showMenu]="false">
            <ng-template
              pTemplate="filter"
              let-value
              let-filter="filterCallback"
            >
              <p-dropdown
                [ngModel]="value"
                [options]="eventoOptions"
                (onChange)="filter($event.value)"
                [autoDisplayFirst]="false"
                placeholder="Filtrar evento"
                appendTo="body"
              >
              </p-dropdown>
            </ng-template>
          </p-columnFilter>
        </th>
        <th class="w-250">
          <p-columnFilter field="Cidade" matchMode="equals" [showMenu]="false">
            <ng-template
              pTemplate="filter"
              let-value
              let-filter="filterCallback"
            >
              <p-dropdown
                [ngModel]="value"
                [options]="localizacaoOptions"
                (onChange)="filter($event.value)"
                [autoDisplayFirst]="false"
                placeholder="Filtrar localização"
                appendTo="body"
              >
              </p-dropdown>
            </ng-template>
          </p-columnFilter>
        </th>
        <th class="w-250">
          <p-columnFilter
            field="DataExpiracao"
            matchMode="equals"
            [showMenu]="false"
          >
            <ng-template
              pTemplate="filter"
              let-value
              let-filter="filterCallback"
            >
              <p-dropdown
                [ngModel]="value"
                [options]="dataExpiracaoOptions"
                (onChange)="filter($event.value)"
                [autoDisplayFirst]="false"
                placeholder="Filtrar localização"
                appendTo="body"
              >
              </p-dropdown>
            </ng-template>
          </p-columnFilter>
        </th>
        <th class="w-250">
          <p-columnFilter field="Valor" matchMode="equals" [showMenu]="false">
            <ng-template
              pTemplate="filter"
              let-value
              let-filter="filterCallback"
            >
              <p-dropdown
                [ngModel]="value"
                [options]="valorOptions"
                (onChange)="filter($event.value)"
                [autoDisplayFirst]="false"
                placeholder="Filtrar valor"
                appendTo="body"
              >
              </p-dropdown>
            </ng-template>
          </p-columnFilter>
        </th>
        <th></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData>
      <tr>
        <td>{{ rowData.Nome }}</td>
        <td>{{ rowData.Cidade }}</td>
        <td>{{ rowData.DataExpiracao | date }}</td>
        <td>{{ rowData.Remuneracao }}</td>
        <td>
          <button
            pButton
            pRipple
            class="p-button-secondary"
            (click)="navigateToDetalhesVaga(rowData.Id)"
          >
            Detalhes
          </button>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td *ngIf="usuario?.CPF" class="text-center" colspan="5">
          Não há vagas no momento
        </td>
        <td *ngIf="usuario?.CNPJ" class="text-center" colspan="5">
          Não há vagas cadastradas
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
